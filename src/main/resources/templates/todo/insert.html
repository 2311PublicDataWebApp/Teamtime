
<!DOCTYPE html>
<html>
	<head>
	<meta charset='utf-8' />
	<title>할일등록</title>
<style>  /* body 스타일 */  html, body {    overflow: hidden;    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;    font-size: 14px;  }  /* 캘린더 위의 해더 스타일(날짜가 있는 부분) */  .fc-header-toolbar {    padding-top: 1em;    padding-left: 1em;    padding-right: 1em;  }</style>
		<link href='/docs/dist/demo-to-codepen.css' rel='stylesheet' />
		<style>
			html, body {
				margin: 0;
				padding: 0;
				font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
				font-size: 14px;
			}
			#calendar {
				max-width: 1100px;
				margin: 40px auto;
			}
		</style>
		<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
		<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.11/index.global.min.js'></script>
		<script src='/docs/dist/demo-to-codepen.js'></script>
<script>

  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');

    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialDate: '2023-01-12',
      initialView: 'timeGridWeek',
      nowIndicator: true,
      headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
      },
      navLinks: true, // 날짜를 선택하면 Day 캘린더나 Week 캘린더로 링크
      editable: true,
      selectable: true, // 달력 일자 드래그 설정가능
      selectMirror: true,
      dayMaxEvents: true, // 이벤트가 오버되면 높이 제한 (+ 몇 개식으로 표현)
      locale: 'ko', // 한국어 설정
      eventAdd: function(obj) { // 이벤트가 추가되면 발생하는 이벤트
          console.log(obj);
        },
        eventChange: function(obj) { // 이벤트가 수정되면 발생하는 이벤트
          console.log(obj);
        },
        eventRemove: function(obj){ // 이벤트가 삭제되면 발생하는 이벤트
          console.log(obj);
        },
        events: [
        	{
            title: 'ㅋㅋㅋㅋㅋㅋㅋㅋㅋ',
            start: '2023-01-07',
            end: '2023-01-10'
        	}
        ],
      select: function(arg) { // 캘린더에서 드래그로 이벤트를 생성할 수 있다.
          var title = prompt('Event Title:');	
          if (title) {
            calendar.addEvent({
              title: title,
              start: arg.start,
              end: arg.end,
            })
            
            $.ajax({
            	url: "/todo/insert.do",
            	type:"POST",
            	data: {
            		"title" : title,
            		"start" : arg.start,
            		"end" : arg.end,
            	},
            	success: function(result) {
            		console.log(title);
            		console.log(arg.start);
            		console.log(arg.end);
            		alert("뗭꾱");
            	},
            	error: function(result) {
            		console.log(title);
            		console.log(arg.start);
            		console.log(arg.end);
            		alert("ajax통신오류");
            	}
            });
          }
          calendar.unselect()
      },
      eventClick: function(arg) {
    	  // 있는 일정 클릭시,
    	  console.log("#등록된 일정 클릭#");
    	  console.log(arg.event);
    	  
        if (confirm('Are you sure you want to delete this event?')) {
          	arg.event.remove()
        }
      },
      editable: true,
      dayMaxEvents: true, // allow "more" link when too many events
    });
    calendar.render();
  });

</script>
	</head>
	<body>
	<div id='calendar'></div>
	</body>
</html>