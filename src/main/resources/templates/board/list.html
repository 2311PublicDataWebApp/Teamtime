<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<meta charset="UTF-8">
		<title>팀 공유 게시판</title>
    	<link href="../css/common/bootstrap.css" th:href="@{/css/common/bootstrap.css}" rel="stylesheet">				
	</head>
	<body>
		<h3 style="text-align: center; margin-bottom: 30px;">팀탐 공유 게시판 :)</h3>
		<div class="container">
			<div style="justify-content: space-between;">
				<div>
					<select class="form-select" id="searchCondition" name="searchCondition" style="width: 100px;">
						<option value="all">전체</option>
						<option value="title">제목</option>
						<option value="content">내용</option>
					</select>
					<input class="form-control me-2" id="searchContent" type="text" placeholder="검색어를 입력해주세요" aria-label="Search">
					<button class="btn btn-outline-success" id="searchKeyword" type="button">search</button>
				</div>
			</div>	
			<div class="row">
				<div class="col-1"></div>
				<div class="col-9">
					<table class="table table-borderless text-center">
						<thead>
							<tr>
								<th>구분</th>
								<th>제목</th>
								<th>작성자</th>
								<th>등록일</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="bList : ${bList}" th:if="${bList.boardCategory} == 'B'">
								<span th:if="${bList.boardCategory} == 'N'">
									<td><span>일반글</span></td>
								</span>
								<span th:if="${bList.boardCategory} == 'B'">
									<td><span>공지사항</span></td>
								</span>
								<td><a th:href="@{/board/detail.do(boardNo=${bList.boardNo})}"><span th:text="${bList.boardTitle}"></span></a></td>
								<td th:text="${bList.userId}"></td>
								<td th:text="${bList.boardDate}"></td>
							</tr>
							<tr th:each="bList : ${bList}" th:if="${bList.boardCategory} == 'N'">
								<span th:if="${bList.boardCategory} == 'N'">
									<td><span>일반글</span></td>
								</span>
								<span th:if="${bList.boardCategory} == 'B'">
									<td><span>공지사항</span></td>
								</span>
								<td><a th:href="@{/board/detail.do(boardNo=${bList.boardNo})}"><span th:text="${bList.boardTitle}"></span></a></td>
								<td th:text="${bList.userId}"></td>
								<td th:text="${bList.boardDate}"></td>
							</tr>
						</tbody>
						<tfoot>
							<tr align="center">
							    <td colspan="4">
							        <span th:if="${pInfo.startNavi != 1}">
							            <a th:href="@{/board/main.do(page=1)}">처음</a>
							            <a th:href="@{/board/main.do(page=${pInfo.prevPage})}">이전</a>
							        </span>
							        <span th:each="page : ${#numbers.sequence(pInfo.startNavi, pInfo.endNavi)}">
							            <a th:href="@{/board/main.do(page=${page})}" th:text="${page}" th:class="${page == pInfo.currentPage} ? 'current' : ''"></a>
							        </span>
							    </td>
							</tr>
						</tfoot>
					</table>
					<div style="justify-content: center;">
						<button class="btn btn-secondary rounded-pill px-3" type="button" onclick="insertBoard();">게시글 등록</button>						
					</div>
				</div>
				<div class="col-1"></div>
			</div>
		</div>
	</body>
	<script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>	
	<script type="text/javascript">
		$("#searchKeyword").on("click", function() {
			var searchCondition = $("#searchCondition").val();
			var searchContent = $("#searchContent").val();
			$.ajax({
				url: "/board/search.do",
				data: {"searchCondition": searchCondition, "searchContent": searchContent},
				type: "GET",
				success: function(result) {
					console.log(result)
					if(result > 0) {
						for(var i in result) {
							var boardNo = result[i].boardNo;
							var teamNo = result[i].teamNo;
							var userId = result[i].userId;
							var boardTitle = result[i].boardTitle;
							var boardCategory = result[i].boardCategory;
							var boardDate = result[i].boardDate;
							var boardContent = result[i].boardContent;
						}
					}
				},
				error: function() {
					alert("Ajax 통신 실패! 관리자에게 문의바랍니다.");
				}
			})
		});
	
		function insertBoard() {
			location.href = "/board/insert.do"
		}
	</script>
</html>