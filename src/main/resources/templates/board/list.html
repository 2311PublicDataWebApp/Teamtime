<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
	<head th:replace="layout/head::header">
	</head>
    	<link href="../css/common/bootstrap.css" th:href="@{/css/common/bootstrap.css}" rel="stylesheet">
	<body id="page-top">
		<th:block sec:authorize="isAuthenticated()">
		    <!-- Page Wrapper -->
		    <div id="wrapper">
		    	<div th:replace="layout/sidebar::sidebar"></div>
		        <!-- Content Wrapper -->
		        <div id="content-wrapper" class="d-flex flex-column">
		            <!-- Main Content -->
		            <div id="content">
		                <div th:replace="layout/topbar::topbar"></div>
		                <!-- Begin Page Content -->
		                <div class="container-fluid">
		                    <!-- Page Heading -->
		                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
		                        <h1 class="h3 mb-0 text-gray-800">마이 팀</h1>
		                    </div>
							<div class="row">						
				<div class="col-1"></div>
				<div class="col-9">
					<div class="container-fluid">
	                    <!-- Page Heading -->
	                    <h1 class="h3 mb-2 text-gray-800">공유 게시판 :)</h1>
	                    <!-- DataTales Example -->
	                    <div class="card shadow mb-4">
	                        <div class="card-body">
	                            <div class="table-responsive">
	                                <div id="dataTable_wrapper" class="dataTables_wrapper dt-bootstrap4">
		                                <div class="row">
		                                	<div class="col-md-10">
		                                		<div id="dataTable_filter" class="dataTables_filter">
		                                			<label>Search:<input type="search" class="form-control form-control-sm" placeholder="" aria-controls="dataTable">
		                                			</label>
		                                		</div>
		                                	</div>
			                                <div class="col-md-2">
												<div style="justify-content: center;">
												</div>		                                
			                                </div>
		                                </div>
		                                <div class="row">
		                                <div class="col-sm-12">
		                                <table class="table table-bordered dataTable" id="dataTable" width="100%" cellspacing="0" role="grid" aria-describedby="dataTable_info" style="width: 100%;">
										<thead>
											<tr role="row">
											<th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Name: activate to sort column ascending" style="width: 10%;">구분</th>
											<th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Position: activate to sort column ascending" style="width: 50%">제목</th>
											<th class="sorting sorting_desc" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Office: activate to sort column ascending" aria-sort="descending" style="width: 60px;">작성자</th>
											<th class="sorting" tabindex="0" aria-controls="dataTable" rowspan="1" colspan="1" aria-label="Age: activate to sort column ascending" style="width: 90px;">등록일</th>
										</thead>
										<tbody>    
											<tr th:each="bList : ${bList}" th:if="${bList.boardCategory} == 'B'">
												<span th:if="${bList.boardCategory} == 'N'">
													<td><span>일반글</span></td>
												</span>
												<span th:if="${bList.boardCategory} == 'B'">
													<td><span>공지사항</span></td>
												</span>
												<td><a th:href="@{/board/detail.do(boardNo=${bList.boardNo})}"><span th:text="${bList.boardTitle}"></span></a></td>
												<td th:text="${bList.userId}"></td>
												<td th:text="${bList.boardDate}"></td>
											</tr>
											<tr th:each="bList : ${bList}" th:if="${bList.boardCategory} == 'N'">
												<span th:if="${bList.boardCategory} == 'N'">
													<td><span>일반글</span></td>
												</span>
												<span th:if="${bList.boardCategory} == 'B'">
													<td><span>공지사항</span></td>
												</span>
												<td><a th:href="@{/board/detail.do(boardNo=${bList.boardNo})}"><span th:text="${bList.boardTitle}"></span></a></td>
												<td th:text="${bList.userId}"></td>
												<td th:text="${bList.boardDate}"></td>
											</tr>
										</tbody>
		                                </table></div></div>
		                                <div class="row">
			                                <div class="col-5">
			                                </div>
			                                <div class="col-5">
				                               	<div class="dataTables_paginate paging_simple_numbers" id="dataTable_paginate">
													<ul class="pagination">
													    <li class="paginate_button page-item previous disabled" id="dataTable_previous">
<!-- 													        <span th:if="${pInfo.startNavi != 1}"> -->
<!-- 													            <a th:href="@{/board/main.do(page=1)}" >처음</a> -->
<!-- 													            <a th:href="@{/board/main.do(page=${pInfo.prevPage})}">이전</a> -->
<!-- 													        </span> -->
													        <span th:each="page : ${#numbers.sequence(pInfo.startNavi, pInfo.endNavi)}">
													            <a th:href="@{/board/main.do(page=${page})}" th:text="${page}" th:class="${page == pInfo.currentPage} ? 'current' : ''"></a>
													        </span>
													    </li>
													</ul>
<!-- 				                               		<ul class="pagination"> -->
<!-- 				                               			<li class="paginate_button page-item previous disabled" id="dataTable_previous"> -->
<!-- 				                               				<a href="#" aria-controls="dataTable" data-dt-idx="0" tabindex="0" class="page-link">Previous</a> -->
<!-- 				                               			</li> -->
<!-- 				                               			<li class="paginate_button page-item active"> -->
<!-- 				                               				<a href="#" aria-controls="dataTable" data-dt-idx="1" tabindex="0" class="page-link">1</a> -->
<!-- 				                               			</li> -->
<!-- 				                               			<li class="paginate_button page-item "> -->
<!-- 				                               				<a href="#" aria-controls="dataTable" data-dt-idx="2" tabindex="0" class="page-link">2</a> -->
<!-- 				                               			</li> -->
<!-- 				                               			<li class="paginate_button page-item "> -->
<!-- 				                               				<a href="#" aria-controls="dataTable" data-dt-idx="3" tabindex="0" class="page-link">3</a> -->
<!-- 				                               			</li> -->
<!-- 				                               			<li class="paginate_button page-item "> -->
<!-- 				                               				<a href="#" aria-controls="dataTable" data-dt-idx="4" tabindex="0" class="page-link">4</a> -->
<!-- 				                               			</li> -->
<!-- 				                               			<li class="paginate_button page-item "> -->
<!-- 				                               				<a href="#" aria-controls="dataTable" data-dt-idx="5" tabindex="0" class="page-link">5</a> -->
<!-- 				                               			</li> -->
<!-- 				                               			<li class="paginate_button page-item "> -->
<!-- 				                               				<a href="#" aria-controls="dataTable" data-dt-idx="6" tabindex="0" class="page-link">6</a> -->
<!-- 				                               			</li> -->
<!-- 				                               			<li class="paginate_button page-item next" id="dataTable_next"> -->
<!-- 				                               				<a href="#" aria-controls="dataTable" data-dt-idx="7" tabindex="0" class="page-link">Next</a> -->
<!-- 				                               			</li> -->
<!-- 				                               		</ul> -->
												</div>
											</div>
											<div class="col-2"><button class="btn btn-secondary rounded-pill px-3" type="button" onclick="insertBoard();">게시글 등록</button></div>
										</div>
									</div>
	                            </div>
	                        </div>
	                    </div>
	                </div>
				</div>
				<div class="col-1"></div>							
							</div>				                    
		                </div>
		                <!-- /.container-fluid -->
		            </div>
		            <!-- End of Main Content -->
		            <div th:replace="layout/footer::footer"></div>
		        </div>
		        <!-- End of Content Wrapper -->
		    </div>
		    <!-- End of Page Wrapper -->
		    <!-- Scroll to Top Button-->
		    <a class="scroll-to-top rounded" href="#page-top">
		        <i class="fas fa-angle-up"></i>
		    </a>
	   	</th:block>
		<script type="text/javascript">
			function deleteAllAlarm(obj, userId){
				$.ajax({
					url:"/alarm/deleteAllAlarm.do",
					type:"post",
					data:{"userId" : userId},
					success: function(data){
						alert("성공");
						location.reload();
					},
					error: function(){
						alert("실패");
					}
				});
			}
		$("#searchKeyword").on("click", function() {
			var searchCondition = $("#searchCondition").val();
			var searchContent = $("#searchContent").val();
			$.ajax({
				url: "/board/search.do",
				data: {"searchCondition": searchCondition, "searchContent": searchContent},
				type: "GET",
				success: function(result) {
					console.log(result)
					if(result > 0) {
						for(var i in result) {
							var boardNo = result[i].boardNo;
							var teamNo = result[i].teamNo;
							var userId = result[i].userId;
							var boardTitle = result[i].boardTitle;
							var boardCategory = result[i].boardCategory;
							var boardDate = result[i].boardDate;
							var boardContent = result[i].boardContent;
						}
					}
				},
				error: function() {
					alert("Ajax 통신 실패! 관리자에게 문의바랍니다.");
				}
			})
		});
	
		function insertBoard() {
			location.href = "/board/insert.do"
		}		
		</script>		
	</body>
</html>